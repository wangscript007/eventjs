/*eventjs v0.0.1, by wqking, https://github.com/wqking/eventjs, @preserve*/
if(void 0===eventjs)var eventjs={};if(function(t){"use strict";function s(t,e){this._g=null,this._m=null,this._f=t,this._d=e}function e(t){this._p=null,this._e=null,this._w=0,t=t||{},this._r=t.hasOwnProperty("canContinueInvoking")?!!t.canContinueInvoking:null,this._x=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._x?(this.dispatch=this._o,this.applyDispatch=this._s):(this.dispatch=this._a,this.applyDispatch=this._l)}var n=e.prototype;n.append=function(t){var e=new s(t,this._q());return this._p?(e._g=this._e,this._e._m=e):this._p=e,this._e=e},n.prepend=function(t){var e=new s(t,this._q());return this._p?(e._m=this._p,this._p._g=e,this._p=e):(this._p=e,this._e=e),e},n.insert=function(t,e){var n=this._i(e);if(!n)return this.append(t);var i=new s(t,this._q());return i._g=n._g,(i._m=n)._g&&(n._g._m=i),n._g=i,n==this._p&&(this._p=i),i},n.remove=function(t){var e=this._i(t);return!!e&&(e._m&&(e._m._g=e._g),e._g&&(e._g._m=e._m),this._p==e&&(this._p=e._m),this._e==e&&(this._e=e._g),!(e._d=0))},n.empty=function(){return!this._p},n.has=function(t){return!!this._i(t)},n.hasAny=function(){return!!this._p},n._o=function(){for(var t=this._w,e=this._p;e&&!(0!=e._d&&t>=e._d&&(e._f.call(this,arguments),this._r&&!this._r.call(this,arguments)));)e=e._m},n._a=function(){for(var t=this._w,e=this._p;e&&!(0!=e._d&&t>=e._d&&(e._f.apply(this,arguments),this._r&&!this._r.apply(this,arguments)));)e=e._m},n._s=function(t){for(var e=this._w,n=this._p;n&&!(0!=n._d&&e>=n._d&&(n._f.call(this,t),this._r&&!this._r.call(this,t)));)n=n._m},n._l=function(t){for(var e=this._w,n=this._p;n&&!(0!=n._d&&e>=n._d&&(n._f.apply(this,t),this._r&&!this._r.apply(this,t)));)n=n._m},n.forEach=function(t){for(var e=this._p,n=this._w;e;)0!=e._d&&n>=e._d&&t(e._f),e=e._m},n.forEachIf=function(t){for(var e=this._p,n=this._w;e;){if(0!=e._d&&n>=e._d&&!t(e._f))return!1;e=e._m}return!0},n._i=function(t){for(var e=this._p;e;){if(e===t||e._f===t)return e;e=e._m}return null},n._q=function(){var t=++this._w;if(0==t){for(var e=this._p;e;)e._d=1,e=e._m;t=++currentCounter}return t},t.CallbackList=e,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs),void 0===eventjs)eventjs={};if(function(t){"use strict";var i=t;function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t){if(this._v={},t=t||{},this._n=t,this._h="function"==typeof t.getEvent?t.getEvent:null,this._c=t.hasOwnProperty("argumentPassingMode")?t.argumentPassingMode:r._t,this._x=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._k=t.mixins,this._j=this._k&&0<this._k.length,this._j)for(var e=0;e<this._k.length;++e)n(this,this._k[e])}"function"==typeof require&&(i=require("./callbacklist.js")),r.argumentPassingIncludeEvent=1,r.argumentPassingExcludeEvent=2,r._t=2,r.setDefaultArgumentPassingMode=function(t){r._t=t},r.getDefaultArgumentPassingMode=function(){return r._t};var e=r.prototype;e.appendListener=function(t,e){return this._u(t,!0).append(e)},e.prependListener=function(t,e){return this._u(t,!0).prepend(e)},e.insertListener=function(t,e,n){return this._u(t,!0).insert(e,n)},e.removeListener=function(t,e){var n=this._u(t,!1);return!!n&&n.remove(e)},e.hasListener=function(t,e){var n=this._u(t,!1);return!!n&&n.has(e)},e.hasAnyListener=function(t){var e=this._u(t,!1);return!!e&&e.hasAny()},e.dispatch=function(){this.applyDispatch(arguments)},e.applyDispatch=function(t){if(this._j)for(var e=0;e<this._k.length;++e){var n=this._k[e];if(n.mixinBeforeDispatch&&!n.mixinBeforeDispatch.call(this,t))return}if(this._h){if(this._x)var i=this._h.call(this,t);else i=this._h.apply(this,t);(s=this._u(i,!1))&&(this._c===r.argumentPassingIncludeEvent&&(t=[i].concat(t)),s.dispatch.apply(s,t))}else{var s;(s=this._u(t[0],!1))&&(this._c===r.argumentPassingExcludeEvent&&(t=Array.prototype.slice.call(t,1)),s.dispatch.apply(s,t))}},e._u=function(t,e){if(this._v.hasOwnProperty(t))return this._v[t];if(e){var n=new i.CallbackList(this._n);return this._v[t]=n}return null},t.EventDispatcher=r,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs),void 0===eventjs)eventjs={};!function(t){"use strict";var e=t;function n(t){e.EventDispatcher.call(this,t),this._b=[]}"function"==typeof require&&(e=require("./eventdispatcher.js"));var i=n.prototype=Object.create(e.EventDispatcher.prototype);i.enqueue=function(){this._b.push(Array.prototype.slice.call(arguments,0))},i.process=function(){var t=this._b;this._b=[];for(var e=t.length,n=0;n<e;++n)this.applyDispatch(t[n])},i.processOne=function(){0<this._b.length&&this.applyDispatch(this._b.shift())},i.processIf=function(t){var e=this._b;this._b=[];for(var n=[],i=e.length,s=0;s<i;++s){var r=e[s];if(this._x)var a=t.call(this,r);else a=t.apply(this,r);a?this.applyDispatch(r):n.push(r)}0<n.length&&(this._b=this._b.concat(n))},i.empty=function(){return 0===this._b.length},i.clearEvents=function(){this._b.length=0},i.peekEvent=function(){return this._b[0]},i.takeEvent=function(){return 0<this._b.length?this._b.shift():null},t.EventQueue=n,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs);