/*eventjs v0.0.1, by wqking, https://github.com/wqking/eventjs, @preserve*/
if(void 0===eventjs)var eventjs={};if(function(t){"use strict";function s(t,e){this._q=null,this._h=null,this._a=t,this._l=e}function e(t){this._x=null,this._j=null,this._i=0,t=t||{},this._e=t.hasOwnProperty("canContinueInvoking")?!!t.canContinueInvoking:null,this._s=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._s?(this.dispatch=this._w,this.applyDispatch=this._v):(this.dispatch=this._t,this.applyDispatch=this._f)}var n=e.prototype;n.append=function(t){var e=new s(t,this._p());return this._x?(e._q=this._j,this._j._h=e):this._x=e,this._j=e},n.prepend=function(t){var e=new s(t,this._p());return this._x?(e._h=this._x,this._x._q=e,this._x=e):(this._x=e,this._j=e),e},n.insert=function(t,e){var n=this._u(e);if(!n)return this.append(t);var i=new s(t,this._p());return i._q=n._q,(i._h=n)._q&&(n._q._h=i),n._q=i,n==this._x&&(this._x=i),i},n.remove=function(t){var e=this._u(t);return!!e&&(e._h&&(e._h._q=e._q),e._q&&(e._q._h=e._h),this._x==e&&(this._x=e._h),this._j==e&&(this._j=e._q),!(e._l=0))},n.empty=function(){return!this._x},n.has=function(t){return!!this._u(t)},n.hasAny=function(){return!!this._x},n._w=function(){for(var t=this._i,e=this._x;e&&!(0!=e._l&&t>=e._l&&(e._a.call(this,arguments),this._e&&!this._e.call(this,arguments)));)e=e._h},n._t=function(){for(var t=this._i,e=this._x;e&&!(0!=e._l&&t>=e._l&&(e._a.apply(this,arguments),this._e&&!this._e.apply(this,arguments)));)e=e._h},n._v=function(t){for(var e=this._i,n=this._x;n&&!(0!=n._l&&e>=n._l&&(n._a.call(this,t),this._e&&!this._e.call(this,t)));)n=n._h},n._f=function(t){for(var e=this._i,n=this._x;n&&!(0!=n._l&&e>=n._l&&(n._a.apply(this,t),this._e&&!this._e.apply(this,t)));)n=n._h},n.forEach=function(t){for(var e=this._x,n=this._i;e;)0!=e._l&&n>=e._l&&t(e._a),e=e._h},n.forEachIf=function(t){for(var e=this._x,n=this._i;e;){if(0!=e._l&&n>=e._l&&!t(e._a))return!1;e=e._h}return!0},n._u=function(t){for(var e=this._x;e;){if(e===t||e._a===t)return e;e=e._h}return null},n._p=function(){var t=++this._i;if(0==t){for(var e=this._x;e;)e._l=1,e=e._h;t=++currentCounter}return t},t.CallbackList=e,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs),void 0===eventjs)eventjs={};if(function(i){"use strict";function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t){if(this._n={},t=t||{},this._g=t,this._r="function"==typeof t.getEvent?t.getEvent:null,this._m=t.hasOwnProperty("argumentPassingMode")?t.argumentPassingMode:r._k,this._s=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._d=t.mixins,this._b=this._d&&0<this._d.length,this._b)for(var e=0;e<this._d.length;++e)n(this,this._d[e])}r.argumentPassingIncludeEvent=1,r.argumentPassingExcludeEvent=2,r._k=2,r.setDefaultArgumentPassingMode=function(t){r._k=t},r.getDefaultArgumentPassingMode=function(){return r._k};var t=r.prototype;t.appendListener=function(t,e){return this._o(t,!0).append(e)},t.prependListener=function(t,e){return this._o(t,!0).prepend(e)},t.insertListener=function(t,e,n){return this._o(t,!0).insert(e,n)},t.removeListener=function(t,e){var n=this._o(t,!1);return!!n&&n.remove(e)},t.hasListener=function(t,e){var n=this._o(t,!1);return!!n&&n.has(e)},t.hasAnyListener=function(t){var e=this._o(t,!1);return!!e&&e.hasAny()},t.dispatch=function(){this.applyDispatch(arguments)},t.applyDispatch=function(t){if(this._b)for(var e=0;e<this._d.length;++e){var n=this._d[e];if(n.mixinBeforeDispatch&&!n.mixinBeforeDispatch.call(this,t))return}if(this._r){if(this._s)var i=this._r.call(this,t);else i=this._r.apply(this,t);(s=this._o(i,!1))&&(this._m===r.argumentPassingIncludeEvent&&(t=[i].concat(t)),s.dispatch.apply(s,t))}else{var s;(s=this._o(t[0],!1))&&(this._m===r.argumentPassingExcludeEvent&&(t=Array.prototype.slice.call(t,1)),s.dispatch.apply(s,t))}},t._o=function(t,e){if(this._n.hasOwnProperty(t))return this._n[t];if(e){var n=new i.CallbackList(this._g);return this._n[t]=n}return null},i.EventDispatcher=r,"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i)}(eventjs),void 0===eventjs)eventjs={};!function(e){"use strict";function t(t){e.EventDispatcher.call(this,t),this._c=[]}var n=t.prototype=Object.create(e.EventDispatcher.prototype);n.enqueue=function(){this._c.push(Array.prototype.slice.call(arguments,0))},n.process=function(){var t=this._c;this._c=[];for(var e=t.length,n=0;n<e;++n)this.applyDispatch(t[n])},n.processOne=function(){0<this._c.length&&this.applyDispatch(this._c.shift())},n.processIf=function(t){var e=this._c;this._c=[];for(var n=[],i=e.length,s=0;s<i;++s){var r=e[s];if(this._s)var a=t.call(this,r);else a=t.apply(this,r);a?this.applyDispatch(r):n.push(r)}0<n.length&&(this._c=this._c.concat(n))},n.empty=function(){return 0===this._c.length},n.clearEvents=function(){this._c.length=0},n.peekEvent=function(){return this._c[0]},n.takeEvent=function(){return 0<this._c.length?this._c.shift():null},e.EventQueue=t,"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports&&(module.exports=e)}(eventjs);