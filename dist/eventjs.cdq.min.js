/*eventjs v0.0.1, by wqking, https://github.com/wqking/eventjs*/
if(void 0===eventjs)var eventjs={};"function"==typeof define&&define.amd?define(function(){return eventjs}):"object"==typeof module&&module.exports&&(module.exports=eventjs),function(t){"use strict";function s(t,e){this._e=null,this._c=null,this._p=t,this._f=e}function e(t){this._m=null,this._q=null,this._d=0,t=t||{},this._a=t.hasOwnProperty("canContinueInvoking")?t.canContinueInvoking:null,this._w=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._w?(this.dispatch=this._j,this.applyDispatch=this._u):(this.dispatch=this._s,this.applyDispatch=this._g)}var n=e.prototype;n.append=function(t){var e=new s(t,this._n());return this._m?(e._e=this._q,this._q._c=e):this._m=e,this._q=e},n.prepend=function(t){var e=new s(t,this._n());return this._m?(e._c=this._m,this._m._e=e,this._m=e):(this._m=e,this._q=e),e},n.insert=function(t,e){var n=this._b(e);if(!n)return this.append(t);var i=new s(t,this._n());return i._e=n._e,(i._c=n)._e&&(n._e._c=i),n._e=i,n==this._m&&(this._m=i),i},n.remove=function(t){var e=this._b(t);return!!e&&(e._c&&(e._c._e=e._e),e._e&&(e._e._c=e._c),this._m==e&&(this._m=e._c),this._q==e&&(this._q=e._e),!(e._f=0))},n.empty=function(){return!this._m},n.has=function(t){return!!this._b(t)},n.hasAny=function(){return!!this._m},n._j=function(){for(var t=this._d,e=this._m;e&&!(0!=e._f&&t>=e._f&&(e._p.call(this,arguments),this._a&&!this._a.call(this,arguments)));)e=e._c},n._s=function(){for(var t=this._d,e=this._m;e&&!(0!=e._f&&t>=e._f&&(e._p.apply(this,arguments),this._a&&!this._a.apply(this,arguments)));)e=e._c},n._u=function(t){for(var e=this._d,n=this._m;n&&!(0!=n._f&&e>=n._f&&(n._p.call(this,t),this._a&&!this._a.call(this,t)));)n=n._c},n._g=function(t){for(var e=this._d,n=this._m;n&&!(0!=n._f&&e>=n._f&&(n._p.apply(this,t),this._a&&!this._a.apply(this,t)));)n=n._c},n.forEach=function(t){for(var e=this._m,n=this._d;e;)0!=e._f&&n>=e._f&&t(e._p),e=e._c},n.forEachIf=function(t){for(var e=this._m,n=this._d;e;){if(0!=e._f&&n>=e._f&&!t(e._p))return!1;e=e._c}return!0},n._b=function(t){for(var e=this._m;e;){if(e===t||e._p===t)return e;e=e._c}return null},n._n=function(){var t=++this._d;if(0==t){for(var e=this._m;e;)e._f=1,e=e._c;t=++this._d}return t},t.CallbackList=e}(eventjs),function(i){"use strict";function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t){if(this._l={},t=t||{},this._x=t,this._v="function"==typeof t.getEvent?t.getEvent:null,this._k=t.hasOwnProperty("argumentPassingMode")?t.argumentPassingMode:r.defaultArgumentPassingMode,this._w=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._r=t.mixins,this._t=this._r&&0<this._r.length,this._t)for(var e=0;e<this._r.length;++e)n(this,this._r[e])}r.argumentPassingIncludeEvent=1,r.argumentPassingExcludeEvent=2,r.defaultArgumentPassingMode=2;var t=r.prototype;t.appendListener=function(t,e){return this._h(t,!0).append(e)},t.prependListener=function(t,e){return this._h(t,!0).prepend(e)},t.insertListener=function(t,e,n){return this._h(t,!0).insert(e,n)},t.removeListener=function(t,e){var n=this._h(t,!1);return!!n&&n.remove(e)},t.hasListener=function(t,e){var n=this._h(t,!1);return!!n&&n.has(e)},t.hasAnyListener=function(t){var e=this._h(t,!1);return!!e&&e.hasAny()},t.dispatch=function(){this.applyDispatch(arguments)},t.applyDispatch=function(t){if(this._t)for(var e=0;e<this._r.length;++e){var n=this._r[e];if(n.mixinBeforeDispatch&&!n.mixinBeforeDispatch.call(this,t))return}if(this._v){if(this._w)var i=this._v.call(this,t);else i=this._v.apply(this,t);(s=this._h(i,!1))&&(this._k===r.argumentPassingIncludeEvent&&(t=[i].concat(t)),s.applyDispatch(t))}else{var s;(s=this._h(t[0],!1))&&(this._k===r.argumentPassingExcludeEvent&&(t=Array.prototype.slice.call(t,1)),s.applyDispatch(t))}},t.forEach=function(t,e){var n=this._h(t,!1);n&&n.forEach(t,e)},t.forEachIf=function(t,e){var n=this._h(t,!1);return!n||n.forEachIf(t,e)},t._h=function(t,e){if(this._l.hasOwnProperty(t))return this._l[t];if(e){var n=new i.CallbackList(this._x);return this._l[t]=n}return null},i.EventDispatcher=r}(eventjs),function(e){"use strict";function t(t){e.EventDispatcher.call(this,t),this._o=[]}var n=t.prototype=Object.create(e.EventDispatcher.prototype);n.enqueue=function(){this._o.push(arguments)},n.process=function(){var t=this._o;this._o=[];for(var e=t.length,n=0;n<e;++n)this.applyDispatch(t[n])},n.processOne=function(){0<this._o.length&&this.applyDispatch(this._o.shift())},n.processIf=function(t){var e=this._o;this._o=[];for(var n=[],i=e.length,s=0;s<i;++s){var r=e[s];if(this._w)var a=t.call(this,r);else a=t.apply(this,r);a?this.applyDispatch(r):n.push(r)}0<n.length&&(this._o=this._o.concat(n))},n.empty=function(){return 0===this._o.length},n.clearEvents=function(){this._o.length=0},n.peekEvent=function(){return this._o[0]},n.takeEvent=function(){return 0<this._o.length?this._o.shift():null},e.EventQueue=t}(eventjs);