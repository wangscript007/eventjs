/*eventjs v0.0.1, by wqking, https://github.com/wqking/eventjs, @preserve*/
if(void 0===eventjs)var eventjs={};if(function(t){"use strict";function s(t,e){this._w=null,this._a=null,this._d=t,this._g=e}function e(t){this._q=null,this._k=null,this._v=0,t=t||{},this._b=t.hasOwnProperty("canContinueInvoking")?!!t.canContinueInvoking:null,this._y=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._y?(this.dispatch=this._r,this.applyDispatch=this._u):(this.dispatch=this._x,this.applyDispatch=this._j)}var n=e.prototype;n.append=function(t){var e=new s(t,this._o());return this._q?(e._w=this._k,this._k._a=e):this._q=e,this._k=e},n.prepend=function(t){var e=new s(t,this._o());return this._q?(e._a=this._q,this._q._w=e,this._q=e):(this._q=e,this._k=e),e},n.insert=function(t,e){var n=this._n(e);if(!n)return this.append(t);var i=new s(t,this._o());return i._w=n._w,(i._a=n)._w&&(n._w._a=i),n._w=i,n==this._q&&(this._q=i),i},n.remove=function(t){var e=this._n(t);return!!e&&(e._a&&(e._a._w=e._w),e._w&&(e._w._a=e._a),this._q==e&&(this._q=e._a),this._k==e&&(this._k=e._w),!(e._g=0))},n.empty=function(){return!this._q},n.has=function(t){return!!this._n(t)},n.hasAny=function(){return!!this._q},n._r=function(){for(var t=this._v,e=this._q;e&&!(0!=e._g&&t>=e._g&&(e._d.call(this,arguments),this._b&&!this._b.call(this,arguments)));)e=e._a},n._x=function(){for(var t=this._v,e=this._q;e&&!(0!=e._g&&t>=e._g&&(e._d.apply(this,arguments),this._b&&!this._b.apply(this,arguments)));)e=e._a},n._u=function(t){for(var e=this._v,n=this._q;n&&!(0!=n._g&&e>=n._g&&(n._d.call(this,t),this._b&&!this._b.call(this,t)));)n=n._a},n._j=function(t){for(var e=this._v,n=this._q;n&&!(0!=n._g&&e>=n._g&&(n._d.apply(this,t),this._b&&!this._b.apply(this,t)));)n=n._a},n.forEach=function(t){for(var e=this._q,n=this._v;e;)0!=e._g&&n>=e._g&&t(e._d),e=e._a},n.forEachIf=function(t){for(var e=this._q,n=this._v;e;){if(0!=e._g&&n>=e._g&&!t(e._d))return!1;e=e._a}return!0},n._n=function(t){for(var e=this._q;e;){if(e===t||e._d===t)return e;e=e._a}return null},n._o=function(){var t=++this._v;if(0==t){for(var e=this._q;e;)e._g=1,e=e._a;t=++currentCounter}return t},t.CallbackList=e,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs),void 0===eventjs)eventjs={};if(function(t){"use strict";var i=t;function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t){if(this._h={},t=t||{},this._m=t,this._l="function"==typeof t.getEvent?t.getEvent:null,this._e=t.hasOwnProperty("argumentPassingMode")?t.argumentPassingMode:r._i,this._y=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._t=t.mixins,this._c=this._t&&0<this._t.length,this._c)for(var e=0;e<this._t.length;++e)n(this,this._t[e])}"function"==typeof require&&(i=require("./callbacklist.js")),r.argumentPassingIncludeEvent=1,r.argumentPassingExcludeEvent=2,r._i=2,r.setDefaultArgumentPassingMode=function(t){r._i=t},r.getDefaultArgumentPassingMode=function(){return r._i};var e=r.prototype;e.appendListener=function(t,e){return this._p(t,!0).append(e)},e.prependListener=function(t,e){return this._p(t,!0).prepend(e)},e.insertListener=function(t,e,n){return this._p(t,!0).insert(e,n)},e.removeListener=function(t,e){var n=this._p(t,!1);return!!n&&n.remove(e)},e.hasListener=function(t,e){var n=this._p(t,!1);return!!n&&n.has(e)},e.hasAnyListener=function(t){var e=this._p(t,!1);return!!e&&e.hasAny()},e.dispatch=function(){this.applyDispatch(arguments)},e.applyDispatch=function(t){if(this._c)for(var e=0;e<this._t.length;++e){var n=this._t[e];if(n.mixinBeforeDispatch&&!n.mixinBeforeDispatch.call(this,t))return}if(this._l){if(this._y)var i=this._l.call(this,t);else i=this._l.apply(this,t);(s=this._p(i,!1))&&(this._e===r.argumentPassingIncludeEvent&&(t=[i].concat(t)),s.dispatch.apply(s,t))}else{var s;(s=this._p(t[0],!1))&&(this._e===r.argumentPassingExcludeEvent&&(t=Array.prototype.slice.call(t,1)),s.dispatch.apply(s,t))}},e._p=function(t,e){if(this._h.hasOwnProperty(t))return this._h[t];if(e){var n=new i.CallbackList(this._m);return this._h[t]=n}return null},t.EventDispatcher=r,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs),void 0===eventjs)eventjs={};if(function(t){"use strict";var e=t;function n(t){e.EventDispatcher.call(this,t),this._f=[]}"function"==typeof require&&(e=require("./eventdispatcher.js"));var i=n.prototype=Object.create(e.EventDispatcher.prototype);i.enqueue=function(){this._f.push(Array.prototype.slice.call(arguments,0))},i.process=function(){var t=this._f;this._f=[];for(var e=t.length,n=0;n<e;++n)this.applyDispatch(t[n])},i.processOne=function(){0<this._f.length&&this.applyDispatch(this._f.shift())},i.processIf=function(t){var e=this._f;this._f=[];for(var n=[],i=e.length,s=0;s<i;++s){var r=e[s];if(this._y)var a=t.call(this,r);else a=t.apply(this,r);a?this.applyDispatch(r):n.push(r)}0<n.length&&(this._f=this._f.concat(n))},i.empty=function(){return 0===this._f.length},i.clearEvents=function(){this._f.length=0},i.peekEvent=function(){return this._f[0]},i.takeEvent=function(){return 0<this._f.length?this._f.shift():null},t.EventQueue=n,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs),void 0===eventjs)eventjs={};!function(t){"use strict";var e=t;function n(t){this._s=new e.CallbackList(t)}"function"==typeof require&&(e=require("../callbacklist.js"));var i=n.prototype;i.appendFilter=function(t){this._s.append(t)},i.removeFilter=function(t){this._s.remove(t)},i.mixinBeforeDispatch=function(e){return!(!this._s.empty()&&!this._s.forEachIf(function(t){return t.call(t,e)}))},t.MixinFilter=n,"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t)}(eventjs);