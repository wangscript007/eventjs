/*eventjs v0.0.1, by wqking, https://github.com/wqking/eventjs*/
if(void 0===eventjs)var eventjs={};"function"==typeof define&&define.amd?define(function(){return eventjs}):"object"==typeof module&&module.exports&&(module.exports=eventjs),function(t){"use strict";function s(t,e){this._d=null,this._k=null,this._o=t,this._x=e}function e(t){this._g=null,this._p=null,this._l=0,t=t||{},this._z=t.hasOwnProperty("canContinueInvoking")?!!t.canContinueInvoking:null,this._i=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._i?(this.dispatch=this._v,this.applyDispatch=this._u):(this.dispatch=this._j,this.applyDispatch=this._q)}var n=e.prototype;n.append=function(t){var e=new s(t,this._c());return this._g?(e._d=this._p,this._p._k=e):this._g=e,this._p=e},n.prepend=function(t){var e=new s(t,this._c());return this._g?(e._k=this._g,this._g._d=e,this._g=e):(this._g=e,this._p=e),e},n.insert=function(t,e){var n=this._f(e);if(!n)return this.append(t);var i=new s(t,this._c());return i._d=n._d,(i._k=n)._d&&(n._d._k=i),n._d=i,n==this._g&&(this._g=i),i},n.remove=function(t){var e=this._f(t);return!!e&&(e._k&&(e._k._d=e._d),e._d&&(e._d._k=e._k),this._g==e&&(this._g=e._k),this._p==e&&(this._p=e._d),!(e._x=0))},n.empty=function(){return!this._g},n.has=function(t){return!!this._f(t)},n.hasAny=function(){return!!this._g},n._v=function(){for(var t=this._l,e=this._g;e&&!(0!=e._x&&t>=e._x&&(e._o.call(this,arguments),this._z&&!this._z.call(this,arguments)));)e=e._k},n._j=function(){for(var t=this._l,e=this._g;e&&!(0!=e._x&&t>=e._x&&(e._o.apply(this,arguments),this._z&&!this._z.apply(this,arguments)));)e=e._k},n._u=function(t){for(var e=this._l,n=this._g;n&&!(0!=n._x&&e>=n._x&&(n._o.call(this,t),this._z&&!this._z.call(this,t)));)n=n._k},n._q=function(t){for(var e=this._l,n=this._g;n&&!(0!=n._x&&e>=n._x&&(n._o.apply(this,t),this._z&&!this._z.apply(this,t)));)n=n._k},n.forEach=function(t){for(var e=this._g,n=this._l;e;)0!=e._x&&n>=e._x&&t(e._o),e=e._k},n.forEachIf=function(t){for(var e=this._g,n=this._l;e;){if(0!=e._x&&n>=e._x&&!t(e._o))return!1;e=e._k}return!0},n._f=function(t){for(var e=this._g;e;){if(e===t||e._o===t)return e;e=e._k}return null},n._c=function(){var t=++this._l;if(0==t){for(var e=this._g;e;)e._x=1,e=e._k;t=++this._l}return t},t.CallbackList=e}(eventjs),function(i){"use strict";function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t){if(this._b={},t=t||{},this._r=t,this._y="function"==typeof t.getEvent?t.getEvent:null,this._e=t.hasOwnProperty("argumentPassingMode")?t.argumentPassingMode:r._s,this._i=!!t.hasOwnProperty("argumentsAsArray")&&!!t.argumentsAsArray,this._n=t.mixins,this._w=this._n&&0<this._n.length,this._w)for(var e=0;e<this._n.length;++e)n(this,this._n[e])}r.argumentPassingIncludeEvent=1,r.argumentPassingExcludeEvent=2,r._s=2,r.setDefaultArgumentPassingMode=function(t){r._s=t},r.getDefaultArgumentPassingMode=function(){return r._s};var t=r.prototype;t.appendListener=function(t,e){return this._a(t,!0).append(e)},t.prependListener=function(t,e){return this._a(t,!0).prepend(e)},t.insertListener=function(t,e,n){return this._a(t,!0).insert(e,n)},t.removeListener=function(t,e){var n=this._a(t,!1);return!!n&&n.remove(e)},t.hasListener=function(t,e){var n=this._a(t,!1);return!!n&&n.has(e)},t.hasAnyListener=function(t){var e=this._a(t,!1);return!!e&&e.hasAny()},t.dispatch=function(){this.applyDispatch(arguments)},t.applyDispatch=function(t){if(this._w)for(var e=0;e<this._n.length;++e){var n=this._n[e];if(n.mixinBeforeDispatch&&!n.mixinBeforeDispatch.call(this,t))return}if(this._y){if(this._i)var i=this._y.call(this,t);else i=this._y.apply(this,t);(s=this._a(i,!1))&&(this._e===r.argumentPassingIncludeEvent&&(t=[i].concat(t)),s.dispatch.apply(s,t))}else{var s;(s=this._a(t[0],!1))&&(this._e===r.argumentPassingExcludeEvent&&(t=Array.prototype.slice.call(t,1)),s.dispatch.apply(s,t))}},t._a=function(t,e){if(this._b.hasOwnProperty(t))return this._b[t];if(e){var n=new i.CallbackList(this._r);return this._b[t]=n}return null},i.EventDispatcher=r}(eventjs),function(e){"use strict";function t(t){e.EventDispatcher.call(this,t),this._m=[]}var n=t.prototype=Object.create(e.EventDispatcher.prototype);n.enqueue=function(){this._m.push(Array.prototype.slice.call(arguments,0))},n.process=function(){var t=this._m;this._m=[];for(var e=t.length,n=0;n<e;++n)this.applyDispatch(t[n])},n.processOne=function(){0<this._m.length&&this.applyDispatch(this._m.shift())},n.processIf=function(t){var e=this._m;this._m=[];for(var n=[],i=e.length,s=0;s<i;++s){var r=e[s];if(this._i)var a=t.call(this,r);else a=t.apply(this,r);a?this.applyDispatch(r):n.push(r)}0<n.length&&(this._m=this._m.concat(n))},n.empty=function(){return 0===this._m.length},n.clearEvents=function(){this._m.length=0},n.peekEvent=function(){return this._m[0]},n.takeEvent=function(){return 0<this._m.length?this._m.shift():null},e.EventQueue=t}(eventjs),function(t){"use strict";var e=t;function n(t){this._t=new e.CallbackList(t)}var i=n.prototype;i.appendFilter=function(t){this._t.append(t)},i.removeFilter=function(t){this._t.remove(t)},i.mixinBeforeDispatch=function(e){return!(!this._t.empty()&&!this._t.forEachIf(function(t){return t.call(t,e)}))},t.MixinFilter=n}(eventjs);